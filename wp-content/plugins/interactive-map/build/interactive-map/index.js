(()=>{"use strict";var e,t={772:()=>{const e=window.wp.blocks,t=window.wp.blockEditor,a=window.wp.components,n=window.wp.i18n,o=window.ReactJSXRuntime,r=[{label:"France",value:"fr",geoJsonUrl:"assets/geojson/france-departements.geojson",center:[46.5,1.8],zoom:5.5}],l=[{label:"CartoDB Voyager",value:"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png"},{label:"OpenStreetMap",value:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},{label:"Stadia Stamen Toner",value:"https://tiles.stadiamaps.com/tiles/stamen_toner/{z}/{x}/{y}{r}.png"}],i=JSON.parse('{"UU":"create-block/interactive-map"}'),s=(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"36",height:"36","aria-hidden":"true",focusable:"false",children:(0,o.jsx)("path",{d:"M12 9c-.8 0-1.5.7-1.5 1.5S11.2 12 12 12s1.5-.7 1.5-1.5S12.8 9 12 9zm0-5c-3.6 0-6.5 2.8-6.5 6.2 0 .8.3 1.8.9 3.1.5 1.1 1.2 2.3 2 3.6.7 1 3 3.8 3.2 3.9l.4.5.4-.5c.2-.2 2.6-2.9 3.2-3.9.8-1.2 1.5-2.5 2-3.6.6-1.3.9-2.3.9-3.1C18.5 6.8 15.6 4 12 4zm4.3 8.7c-.5 1-1.1 2.2-1.9 3.4-.5.7-1.7 2.2-2.4 3-.7-.8-1.9-2.3-2.4-3-.8-1.2-1.4-2.3-1.9-3.3-.6-1.4-.7-2.2-.7-2.5 0-2.6 2.2-4.7 5-4.7s5 2.1 5 4.7c0 .2-.1 1-.7 2.4z"})});(0,e.registerBlockType)(i.UU,{icon:s,edit:function({attributes:e,setAttributes:i}){const s=(0,t.useBlockProps)(),{countrySlug:p,tileLayerUrl:c,apiEndpoint:v,mapBackgroundColor:g,defaultPathColor:d,hoverPathColor:m,showVignettes:h,vignettes:u}=e,x=(e,t,a)=>{const n=[...u];n[e]={...n[e],[t]:a},i({vignettes:n})};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(t.InspectorControls,{children:[(0,o.jsxs)(a.PanelBody,{title:(0,n.__)("Map Settings","interactive-map"),children:[(0,o.jsx)(a.SelectControl,{label:(0,n.__)("Country","interactive-map"),value:p,options:r,onChange:e=>{const t=r.find(t=>t.value===e);t&&i({countrySlug:e,geoJsonUrl:t.geoJsonUrl,mapCenterLat:t.center[0],mapCenterLng:t.center[1],mapDefaultZoom:t.zoom})}}),(0,o.jsx)(a.SelectControl,{label:(0,n.__)("Tile Layer Provider","interactive-map"),value:c,options:l,onChange:e=>i({tileLayerUrl:e})})]}),(0,o.jsx)(a.PanelBody,{title:(0,n.__)("Data & API","interactive-map"),children:(0,o.jsx)(a.TextControl,{label:(0,n.__)("Markers API Endpoint","interactive-map"),value:v,onChange:e=>i({apiEndpoint:e}),help:(0,n.__)("The endpoint that receives coordinates and returns markers.","interactive-map")})}),(0,o.jsxs)(a.PanelBody,{title:(0,n.__)("Appearance","interactive-map"),children:[(0,o.jsx)(a.TextControl,{label:(0,n.__)("Background Color","interactive-map"),value:g,onChange:e=>i({mapBackgroundColor:e})}),(0,o.jsx)(a.TextControl,{label:(0,n.__)("Default Department Color","interactive-map"),value:d,onChange:e=>i({defaultPathColor:e})}),(0,o.jsx)(a.TextControl,{label:(0,n.__)("Hover Department Color","interactive-map"),value:m,onChange:e=>i({hoverPathColor:e})})]}),(0,o.jsxs)(a.PanelBody,{title:(0,n.__)("Vignettes","interactive-map"),initialOpen:!1,children:[(0,o.jsx)(a.ToggleControl,{label:(0,n.__)("Show Vignettes","interactive-map"),checked:h,onChange:e=>i({showVignettes:e})}),h&&(0,o.jsxs)("div",{style:{marginTop:"20px"},children:[u.map((e,t)=>(0,o.jsxs)("div",{style:{border:"1px solid #ccc",padding:"10px",marginBottom:"10px"},children:[(0,o.jsx)(a.TextControl,{label:(0,n.__)("Label","interactive-map"),value:e.label,onChange:e=>x(t,"label",e)}),(0,o.jsx)(a.TextControl,{label:(0,n.__)("View ID","interactive-map"),value:e.id,onChange:e=>x(t,"id",e)}),(0,o.jsxs)("div",{style:{display:"flex",gap:"10px"},children:[(0,o.jsx)(a.TextControl,{label:(0,n.__)("Lat","interactive-map"),type:"number",value:e.lat,onChange:e=>x(t,"lat",parseFloat(e))}),(0,o.jsx)(a.TextControl,{label:(0,n.__)("Lng","interactive-map"),type:"number",value:e.lng,onChange:e=>x(t,"lng",parseFloat(e))}),(0,o.jsx)(a.TextControl,{label:(0,n.__)("Zoom","interactive-map"),type:"number",value:e.zoom,onChange:e=>x(t,"zoom",parseFloat(e))})]}),(0,o.jsx)(a.TextareaControl,{label:(0,n.__)("SVG Code","interactive-map"),value:e.svg,onChange:e=>x(t,"svg",e),rows:5}),(0,o.jsx)(a.Button,{isDestructive:!0,isSecondary:!0,onClick:()=>(e=>{const t=u.filter((t,a)=>a!==e);i({vignettes:t})})(t),style:{marginTop:"10px"},children:(0,n.__)("Remove Vignette","interactive-map")})]},t)),(0,o.jsx)(a.Button,{variant:"primary",onClick:()=>{const e=[...u,{id:`view-${u.length+1}`,label:"Nouvelle Vue",lat:47,lng:2.2,zoom:5.5,svg:"<svg>...</svg>"}];i({vignettes:e})},style:{marginTop:"20px"},children:(0,n.__)("Add Vignette","interactive-map")})]})]})]}),(0,o.jsxs)("div",{...s,children:[(0,o.jsx)("p",{children:"Carte Interactive"}),(0,o.jsx)("p",{style:{fontSize:"12px",fontStyle:"italic"},children:(0,n.__)("Configure the map in the sidebar.","interactive-map")})]})]})},save:function(){return null}})}},a={};function n(e){var o=a[e];if(void 0!==o)return o.exports;var r=a[e]={exports:{}};return t[e](r,r.exports,n),r.exports}n.m=t,e=[],n.O=(t,a,o,r)=>{if(!a){var l=1/0;for(c=0;c<e.length;c++){for(var[a,o,r]=e[c],i=!0,s=0;s<a.length;s++)(!1&r||l>=r)&&Object.keys(n.O).every(e=>n.O[e](a[s]))?a.splice(s--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var p=o();void 0!==p&&(t=p)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,o,r]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={349:0,801:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var o,r,[l,i,s]=a,p=0;if(l.some(t=>0!==e[t])){for(o in i)n.o(i,o)&&(n.m[o]=i[o]);if(s)var c=s(n)}for(t&&t(a);p<l.length;p++)r=l[p],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=globalThis.webpackChunkinteractive_map=globalThis.webpackChunkinteractive_map||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var o=n.O(void 0,[801],()=>n(772));o=n.O(o)})();